# v1.1 - Discovery-First Development

**Released:** November 2025

This release transforms DevEnv into a **discovery-first development system** where requirements extraction precedes all implementation.

---

## Highlights

- **New Skill**: `discovery-interviewer` - 90-minute structured requirements interviews
- **New Skill**: `test-generator` - BDD/Gherkin test scenario generation
- **Updated**: `saas-project-orchestrator` now begins with discovery as Phase 0
- **New Methodology**: Scenarios serve as requirements, tests, and documentation

---

## New: Discovery Interviewer Skill

The `discovery-interviewer` skill conducts comprehensive 90-minute structured interviews that extract complete requirements before any code is written.

### What It Does

Guides you through 8 sections in 90 minutes:

| Section | Duration | Focus |
|---------|----------|-------|
| Product Vision | 10 min | Elevator pitch, value proposition, business model |
| User Personas | 10 min | User types, goals, pain points, journeys |
| Core Workflows | 20 min | Step-by-step actions, data, decisions, errors |
| Data & Entities | 15 min | Things the system manages, relationships |
| Edge Cases | 10 min | Boundaries, concurrent operations, deletions |
| Success Criteria | 10 min | Acceptance criteria, performance targets |
| Constraints | 10 min | Tech requirements, compliance, integrations |
| Review | 5 min | Completeness check, prioritization |

### Dual Persona Mode

The skill operates in two modes:

1. **Interviewer Mode**: When you know the answer, it extracts and documents
2. **Product Expert Mode**: When you don't know, it provides industry best practices and guides you to decisions

### Output

A 15-25 page discovery document containing:

- Complete workflows with every step documented
- Full data model with entity definitions
- Edge cases and boundary conditions
- Success criteria and acceptance definitions
- Technical constraints and integration requirements

---

## New: Test Generator Skill

The `test-generator` skill creates comprehensive BDD/Gherkin test suites from discovery output.

### Three-Layer Testing

| Layer | Coverage | Focus |
|-------|----------|-------|
| API Tests | 40% | Backend endpoints, business logic |
| UI Tests | 45% | Components, forms, interactions |
| E2E Tests | 15% | Complete user workflows |

### What It Creates

- Gherkin `.feature` files organized by layer
- TypeScript step definitions
- Cucumber configuration
- Traceability matrix (task to test mapping)

### Tag System

```gherkin
@api @crud @smoke
Scenario: Create project with valid data
  Given I have a valid project payload
  When I send a POST request to "/api/projects"
  Then the response status should be 201
```

Tags organize tests by:

- **Layer**: `@api`, `@ui`, `@e2e`
- **Priority**: `@smoke`, `@critical`, `@regression`
- **Type**: `@positive`, `@negative`, `@edge-case`, `@security`

---

## Updated Workflow

### Before v1.1

```
Orchestrator → Brief → Schema → Backend → Frontend → Features
```

### After v1.1

```
Phase 0: discovery-interviewer → Complete discovery doc
   |
Phase 1: test-generator → Gherkin scenarios from workflows
   |
Phase 2: schema-architect → Extract from discovery + scenarios
   |
Phase 3: product-brief-writer → Synthesize all artifacts
   |
Phase 4: roadmap-planner → Phase scenarios into delivery waves
   |
Phase 5+: Implementation (backend, frontend, features)
```

### Why This Order?

1. **Discovery First**: Quality here determines quality everywhere
2. **Scenarios Second**: Workflows become both acceptance criteria AND automated tests
3. **Schema Third**: Extracted from discovery entities + scenario data needs
4. **Brief Fourth**: Synthesizes and references other artifacts
5. **Roadmap Fifth**: Groups scenarios by priority into delivery phases

---

## Triple-Duty Gherkin

Gherkin scenarios now serve three purposes simultaneously:

### 1. Requirements Specification

```gherkin
Feature: Team Invitations

  Scenario: Admin invites new team member
    Given I am an admin of organization "Acme Corp"
    When I invite "newuser@example.com" to the team
    Then an invitation email should be sent
    And the invitation should expire in 7 days
```

This documents: who can invite (admins), what happens (email sent), business rules (7-day expiration).

### 2. Acceptance Tests

The same scenario becomes an automated test that validates implementation.

### 3. Living Documentation

Scenarios serve as always-current documentation because they're verified by tests.

---

## Coverage Standards

| Feature Type | Minimum Tests | API | UI | E2E |
|--------------|--------------|-----|----|----|
| CRUD Entity | 15-20 | 8-10 | 5-7 | 2-3 |
| Authentication | 17-22 | 6-8 | 8-10 | 3-4 |
| Payment Flow | 15-19 | 5-6 | 6-8 | 4-5 |

---

## Getting Started

### Start Discovery

```
"I want to build a SaaS for [your idea]"
```

The orchestrator automatically calls `discovery-interviewer` as Phase 0.

### Generate Tests

```
"Generate tests for [feature name]"
```

The `test-generator` creates Gherkin scenarios with full coverage.

---

## Benefits

### For Builders

- Clear target with no ambiguity
- Test-driven with automated validation
- Less rework from correct requirements upfront

### For Quality

- Complete requirements lead to complete implementation
- Edge cases handled from the start
- 70-80% test coverage standard

### For Business

- Build it right once instead of iterating forever
- Clear scope prevents endless scope creep
- Validated assumptions early in the process
